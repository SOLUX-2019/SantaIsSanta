{"version":3,"sources":["../../../node_modules/tslib/tslib.es6.js","ng://providers/lib/providers/star-rating/star-rating.component.ts","ng://providers/lib/providers/provider-widget/provider-widget.component.ts","ng://providers/lib/providers/provider-rating/provider-rating.component.ts","ng://providers/lib/providers/provider-rating/provider-rating-widget/provider-rating-item/provider-rating-item.component.ts","ng://providers/lib/providers/provider-rating/customer-review.ts","ng://providers/lib/providers/provider-rating/provider-rating-widget/provider-rating-widget.component.ts","ng://providers/lib/providers/provider-details/provider-details.component.ts","ng://providers/lib/providers/provider-private-message/provider-private-message.component.ts","ng://providers/lib/providers/provider-select/provider-select.component.ts","ng://providers/lib/providers/escape-html.pipe.ts","ng://providers/lib/providers/provider-summary/provider-summary.component.ts","ng://providers/lib/providers.module.ts"],"names":["__decorate","decorators","target","key","desc","d","c","arguments","length","r","Object","getOwnPropertyDescriptor","Reflect","decorate","i","defineProperty","StarRatingColor","ProviderWidgetComponent","providerService","http","cdr","this","provider","Provider","id","designatedProvider","onAppointmentCreated","EventEmitter","onSelectedProvider","_showAvailability","availabilityLoaded","showRating","showDetails","showPrivateMessage","loaded","prototype","selectProvider","value","console","log","checked","emit","appointmentCreated","appointment","clearAvailability","showAvailability","onAvailabilityLoaded","event","detectChanges","availability","onRatingSaved","ngOnInit","_this","getProviderById","providerId","then","response","error","surveyUrl","get","subscribe","providerDetails","ProvidersService","HttpClient","ChangeDetectorRef","Input","Output","Component","selector","template","ProviderRatingComponent","snackbar","router","route","showWidget","params","MatSnackBar","Router","ActivatedRoute","ProviderRatingItemComponent","moment","CustomerReview","input","range","submittedOn","rating","comments","ProviderRatingWidgetComponent","customerId","ratings","commentFormControl","FormControl","Validators","required","loading","loadingReviews","saved","getRatingsForProvider","onRatingChanged","submitRating","customerReview","Date","getTime","post","open","verticalPosition","duration","ProviderDetailsComponent","ProviderPrivateMessageComponent","streamClientService","close","onPrivateMessage","privateMessage","actor","threadId","UUID","to","getToken","token","addActivity","privateMessageResponse","StreamClientService","ProviderSelectComponent","customerService","streamClient","providers","customer","undefined","loadCustomer","customerList","loadProviders","getAllProviders","onProviderSelected","newProvider","preferredProvider","activity","StreamActivity","verb","object","saveCustomer","tokenresponse","follow","navigateByUrl","CustomerService","StarRatingComponent","snackBar","ratingUpdated","snackBarDuration","ratingArr","index","starCount","push","onClick","showRatingLabel","level","result","showIcon","encapsulation","ViewEncapsulation","Emulated","EscapeHtmlPipe","sanitizer","transform","content","bypassSecurityTrustHtml","DomSanitizer","Pipe","name","pure","ProviderSummaryComponent","firstName","lastName","catch","ContentChild","TemplateRef","ProvidersModule","NgModule","declarations","imports","MaterialModule","SchedulingModule","CommonModule","FlexLayoutModule","ReactiveFormsModule","ActivityStreamModule","AuthModule","exports"],"mappings":"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","sourcesContent":["/*! *****************************************************************************\r\nCopyright (c) Microsoft Corporation. All rights reserved.\r\nLicensed under the Apache License, Version 2.0 (the \"License\"); you may not use\r\nthis file except in compliance with the License. You may obtain a copy of the\r\nLicense at http://www.apache.org/licenses/LICENSE-2.0\r\n\r\nTHIS CODE IS PROVIDED ON AN *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\nKIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED\r\nWARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE,\r\nMERCHANTABLITY OR NON-INFRINGEMENT.\r\n\r\nSee the Apache Version 2.0 License for specific language governing permissions\r\nand limitations under the License.\r\n***************************************************************************** */\r\n/* global Reflect, Promise */\r\n\r\nvar extendStatics = function(d, b) {\r\n    extendStatics = Object.setPrototypeOf ||\r\n        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\r\n        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\r\n    return extendStatics(d, b);\r\n};\r\n\r\nexport function __extends(d, b) {\r\n    extendStatics(d, b);\r\n    function __() { this.constructor = d; }\r\n    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\r\n}\r\n\r\nexport var __assign = function() {\r\n    __assign = Object.assign || function __assign(t) {\r\n        for (var s, i = 1, n = arguments.length; i < n; i++) {\r\n            s = arguments[i];\r\n            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p)) t[p] = s[p];\r\n        }\r\n        return t;\r\n    }\r\n    return __assign.apply(this, arguments);\r\n}\r\n\r\nexport function __rest(s, e) {\r\n    var t = {};\r\n    for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p) && e.indexOf(p) < 0)\r\n        t[p] = s[p];\r\n    if (s != null && typeof Object.getOwnPropertySymbols === \"function\")\r\n        for (var i = 0, p = Object.getOwnPropertySymbols(s); i < p.length; i++) {\r\n            if (e.indexOf(p[i]) < 0 && Object.prototype.propertyIsEnumerable.call(s, p[i]))\r\n                t[p[i]] = s[p[i]];\r\n        }\r\n    return t;\r\n}\r\n\r\nexport function __decorate(decorators, target, key, desc) {\r\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\r\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\r\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\r\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\r\n}\r\n\r\nexport function __param(paramIndex, decorator) {\r\n    return function (target, key) { decorator(target, key, paramIndex); }\r\n}\r\n\r\nexport function __metadata(metadataKey, metadataValue) {\r\n    if (typeof Reflect === \"object\" && typeof Reflect.metadata === \"function\") return Reflect.metadata(metadataKey, metadataValue);\r\n}\r\n\r\nexport function __awaiter(thisArg, _arguments, P, generator) {\r\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\r\n    return new (P || (P = Promise))(function (resolve, reject) {\r\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\r\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\r\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\r\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\r\n    });\r\n}\r\n\r\nexport function __generator(thisArg, body) {\r\n    var _ = { label: 0, sent: function() { if (t[0] & 1) throw t[1]; return t[1]; }, trys: [], ops: [] }, f, y, t, g;\r\n    return g = { next: verb(0), \"throw\": verb(1), \"return\": verb(2) }, typeof Symbol === \"function\" && (g[Symbol.iterator] = function() { return this; }), g;\r\n    function verb(n) { return function (v) { return step([n, v]); }; }\r\n    function step(op) {\r\n        if (f) throw new TypeError(\"Generator is already executing.\");\r\n        while (_) try {\r\n            if (f = 1, y && (t = op[0] & 2 ? y[\"return\"] : op[0] ? y[\"throw\"] || ((t = y[\"return\"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;\r\n            if (y = 0, t) op = [op[0] & 2, t.value];\r\n            switch (op[0]) {\r\n                case 0: case 1: t = op; break;\r\n                case 4: _.label++; return { value: op[1], done: false };\r\n                case 5: _.label++; y = op[1]; op = [0]; continue;\r\n                case 7: op = _.ops.pop(); _.trys.pop(); continue;\r\n                default:\r\n                    if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) { _ = 0; continue; }\r\n                    if (op[0] === 3 && (!t || (op[1] > t[0] && op[1] < t[3]))) { _.label = op[1]; break; }\r\n                    if (op[0] === 6 && _.label < t[1]) { _.label = t[1]; t = op; break; }\r\n                    if (t && _.label < t[2]) { _.label = t[2]; _.ops.push(op); break; }\r\n                    if (t[2]) _.ops.pop();\r\n                    _.trys.pop(); continue;\r\n            }\r\n            op = body.call(thisArg, _);\r\n        } catch (e) { op = [6, e]; y = 0; } finally { f = t = 0; }\r\n        if (op[0] & 5) throw op[1]; return { value: op[0] ? op[1] : void 0, done: true };\r\n    }\r\n}\r\n\r\nexport function __exportStar(m, exports) {\r\n    for (var p in m) if (!exports.hasOwnProperty(p)) exports[p] = m[p];\r\n}\r\n\r\nexport function __values(o) {\r\n    var s = typeof Symbol === \"function\" && Symbol.iterator, m = s && o[s], i = 0;\r\n    if (m) return m.call(o);\r\n    if (o && typeof o.length === \"number\") return {\r\n        next: function () {\r\n            if (o && i >= o.length) o = void 0;\r\n            return { value: o && o[i++], done: !o };\r\n        }\r\n    };\r\n    throw new TypeError(s ? \"Object is not iterable.\" : \"Symbol.iterator is not defined.\");\r\n}\r\n\r\nexport function __read(o, n) {\r\n    var m = typeof Symbol === \"function\" && o[Symbol.iterator];\r\n    if (!m) return o;\r\n    var i = m.call(o), r, ar = [], e;\r\n    try {\r\n        while ((n === void 0 || n-- > 0) && !(r = i.next()).done) ar.push(r.value);\r\n    }\r\n    catch (error) { e = { error: error }; }\r\n    finally {\r\n        try {\r\n            if (r && !r.done && (m = i[\"return\"])) m.call(i);\r\n        }\r\n        finally { if (e) throw e.error; }\r\n    }\r\n    return ar;\r\n}\r\n\r\nexport function __spread() {\r\n    for (var ar = [], i = 0; i < arguments.length; i++)\r\n        ar = ar.concat(__read(arguments[i]));\r\n    return ar;\r\n}\r\n\r\nexport function __spreadArrays() {\r\n    for (var s = 0, i = 0, il = arguments.length; i < il; i++) s += arguments[i].length;\r\n    for (var r = Array(s), k = 0, i = 0; i < il; i++)\r\n        for (var a = arguments[i], j = 0, jl = a.length; j < jl; j++, k++)\r\n            r[k] = a[j];\r\n    return r;\r\n};\r\n\r\nexport function __await(v) {\r\n    return this instanceof __await ? (this.v = v, this) : new __await(v);\r\n}\r\n\r\nexport function __asyncGenerator(thisArg, _arguments, generator) {\r\n    if (!Symbol.asyncIterator) throw new TypeError(\"Symbol.asyncIterator is not defined.\");\r\n    var g = generator.apply(thisArg, _arguments || []), i, q = [];\r\n    return i = {}, verb(\"next\"), verb(\"throw\"), verb(\"return\"), i[Symbol.asyncIterator] = function () { return this; }, i;\r\n    function verb(n) { if (g[n]) i[n] = function (v) { return new Promise(function (a, b) { q.push([n, v, a, b]) > 1 || resume(n, v); }); }; }\r\n    function resume(n, v) { try { step(g[n](v)); } catch (e) { settle(q[0][3], e); } }\r\n    function step(r) { r.value instanceof __await ? Promise.resolve(r.value.v).then(fulfill, reject) : settle(q[0][2], r); }\r\n    function fulfill(value) { resume(\"next\", value); }\r\n    function reject(value) { resume(\"throw\", value); }\r\n    function settle(f, v) { if (f(v), q.shift(), q.length) resume(q[0][0], q[0][1]); }\r\n}\r\n\r\nexport function __asyncDelegator(o) {\r\n    var i, p;\r\n    return i = {}, verb(\"next\"), verb(\"throw\", function (e) { throw e; }), verb(\"return\"), i[Symbol.iterator] = function () { return this; }, i;\r\n    function verb(n, f) { i[n] = o[n] ? function (v) { return (p = !p) ? { value: __await(o[n](v)), done: n === \"return\" } : f ? f(v) : v; } : f; }\r\n}\r\n\r\nexport function __asyncValues(o) {\r\n    if (!Symbol.asyncIterator) throw new TypeError(\"Symbol.asyncIterator is not defined.\");\r\n    var m = o[Symbol.asyncIterator], i;\r\n    return m ? m.call(o) : (o = typeof __values === \"function\" ? __values(o) : o[Symbol.iterator](), i = {}, verb(\"next\"), verb(\"throw\"), verb(\"return\"), i[Symbol.asyncIterator] = function () { return this; }, i);\r\n    function verb(n) { i[n] = o[n] && function (v) { return new Promise(function (resolve, reject) { v = o[n](v), settle(resolve, reject, v.done, v.value); }); }; }\r\n    function settle(resolve, reject, d, v) { Promise.resolve(v).then(function(v) { resolve({ value: v, done: d }); }, reject); }\r\n}\r\n\r\nexport function __makeTemplateObject(cooked, raw) {\r\n    if (Object.defineProperty) { Object.defineProperty(cooked, \"raw\", { value: raw }); } else { cooked.raw = raw; }\r\n    return cooked;\r\n};\r\n\r\nexport function __importStar(mod) {\r\n    if (mod && mod.__esModule) return mod;\r\n    var result = {};\r\n    if (mod != null) for (var k in mod) if (Object.hasOwnProperty.call(mod, k)) result[k] = mod[k];\r\n    result.default = mod;\r\n    return result;\r\n}\r\n\r\nexport function __importDefault(mod) {\r\n    return (mod && mod.__esModule) ? mod : { default: mod };\r\n}\r\n\r\nexport function __classPrivateFieldGet(receiver, privateMap) {\r\n    if (!privateMap.has(receiver)) {\r\n        throw new TypeError(\"attempted to get private field on non-instance\");\r\n    }\r\n    return privateMap.get(receiver);\r\n}\r\n\r\nexport function __classPrivateFieldSet(receiver, privateMap, value) {\r\n    if (!privateMap.has(receiver)) {\r\n        throw new TypeError(\"attempted to set private field on non-instance\");\r\n    }\r\n    privateMap.set(receiver, value);\r\n    return value;\r\n}\r\n","import { Component, OnInit, Input, Output, EventEmitter, ViewEncapsulation } from '@angular/core';\nimport { MatSnackBar } from '@angular/material/snack-bar';\n\n@Component({\n  selector: 'mat-star-rating',\n  templateUrl: './star-rating.component.html',\n  styleUrls: ['./star-rating.component.scss'],\n  encapsulation: ViewEncapsulation.Emulated\n})\nexport class StarRatingComponent implements OnInit {\n\n  @Input('rating') private rating: number;\n  @Input('starCount') public starCount: number;\n  @Input('color') color: string;\n  @Output() private ratingUpdated = new EventEmitter();\n\n  private snackBarDuration = 2000;\n  public ratingArr = [];\n\n  constructor(private snackBar: MatSnackBar) {\n  }\n\n\n  ngOnInit() {\n    for (let index = 0; index < this.starCount; index++) {\n      this.ratingArr.push(index);\n    }\n  }\n  onClick(rating: number) {\n    console.log(rating);\n    this.ratingUpdated.emit(rating);\n    return false;\n  }\n\n  showRatingLabel(level: number){\n    let result = '';\n    switch (level) {\n      case 1: result = 'Poor'; break;\n      case 2: result = 'Not Good'; break;\n      case 3: result = 'Fine'; break;\n      case 4: result = 'Really Good'; break;\n      case 5: result = 'Excellent'; break;\n    }\n    return result;\n  }\n\n  showIcon(index: number) {\n    if (this.rating >= index + 1) {\n      return 'star';\n    } else {\n      return 'star_border';\n    }\n  }\n\n}\nexport enum StarRatingColor {\n  primary = 'primary',\n  accent = 'accent',\n  warn = 'warn'\n}\n","import {ChangeDetectorRef, Component, EventEmitter, Input, OnInit, Output} from '@angular/core';\nimport {HttpClient} from '@angular/common/http';\nimport {Provider} from '@brightpath/common';\nimport {ProvidersService} from '@brightpath/scheduling';\n\n@Component({\n  selector: 'provider-widget',\n  templateUrl: './provider-widget.component.html',\n  styleUrls: ['./provider-widget.component.scss']\n})\nexport class ProviderWidgetComponent implements OnInit {\n\n  @Input() provider: Provider = new Provider({ id: 'unknown' });\n  @Input() providerId: string;\n  @Input() designatedProvider = false;\n  @Output() onAppointmentCreated = new EventEmitter();\n  @Output() onSelectedProvider = new EventEmitter();\n\n  providerDetails: any;\n  // tslint:disable-next-line:variable-name\n  _showAvailability = false;\n  availabilityLoaded = false;\n  showRating = false;\n  showDetails = false;\n  showPrivateMessage = false;\n  loaded = false;\n\n  constructor(\n     private providerService: ProvidersService,\n     private http: HttpClient,\n     private cdr: ChangeDetectorRef\n  ) {\n\n  }\n\n  selectProvider(value) {\n    console.log(value);\n    if (value.checked) {\n      this.onSelectedProvider.emit(this.provider);\n    }\n  }\n\n  appointmentCreated(appointment) {\n    this.onAppointmentCreated.emit(appointment);\n  }\n\n  clearAvailability() {\n    this.showAvailability = false;\n    this.availabilityLoaded = false;\n  }\n\n  onAvailabilityLoaded(event) {\n    console.log('bam.  loaded');\n    this.availabilityLoaded = true;\n    this.cdr.detectChanges();\n  }\n\n  set showAvailability(availability: boolean) {\n    this._showAvailability = availability;\n    this.cdr.detectChanges();\n  }\n\n  get showAvailability() {\n    return this._showAvailability;\n  }\n\n  onRatingSaved(event) {\n    this.showRating = false;\n    this.cdr.detectChanges();\n  }\n\n  ngOnInit() {\n    // load the survey results for the provider\n    if (this.provider.id === 'unknown') {\n      this.providerService.getProviderById(this.providerId)\n        .then((response) => {\n          this.provider = response as Provider;\n          this.cdr.detectChanges();\n        }, (error) => {\n          console.log('An error occurred');\n        });\n    } else {\n      this.providerId = this.provider.id;\n    }\n\n    const surveyUrl = `https://api-dev.brightpathvt.com/providers/surveyresults/${this.providerId}`;\n    this.http.get(surveyUrl)\n      .subscribe((response) => {\n        this.loaded = true;\n        this.providerDetails = response;\n        console.log('details', response);\n        // const licenses: any[] = this.providerDetails.licenses;\n        // const licenseString = licenses.map((license: any) => {\n        //   console.log('license', license);\n        //   return license.name;\n        // }).join(',');\n        // console.log('licenseString', licenseString);\n        this.cdr.detectChanges();\n      }, (error) => {\n        this.loaded = true;\n        console.log('An error occurred');\n        console.log(error);\n      });\n  }\n\n\n}\n","import { Component, OnInit } from '@angular/core';\nimport {ActivatedRoute, Router} from '@angular/router';\nimport {HttpClient} from '@angular/common/http';\nimport { MatSnackBar } from '@angular/material/snack-bar';\nimport {ProvidersService} from '@brightpath/scheduling';\n\n@Component({\n  selector: 'provider-rating',\n  templateUrl: './provider-rating.component.html',\n  styleUrls: ['./provider-rating.component.scss']\n})\nexport class ProviderRatingComponent implements OnInit {\n\n  providerId = '';\n  showWidget = false;\n\n  constructor(private providerService: ProvidersService,\n              private http: HttpClient,\n              private snackbar: MatSnackBar,\n              private router: Router,\n              private route: ActivatedRoute) { }\n\n  ngOnInit() {\n    this.route.params.subscribe((params) => {\n      console.log(params);\n      if (params.id) {\n        this.providerId = params.id;\n      }\n      this.showWidget = true;\n    });\n\n  }\n}\n","import {Component, Input, OnInit} from '@angular/core';\nimport {CustomerReview} from '../../customer-review';\nimport * as moment from 'moment';\n\n@Component({\n  selector: 'provider-rating-item',\n  templateUrl: './provider-rating-item.component.html',\n  styleUrls: ['./provider-rating-item.component.scss']\n})\nexport class ProviderRatingItemComponent implements OnInit {\n\n  @Input() customerRating: CustomerReview;\n  moment = moment;\n\n  constructor() { }\n\n  ngOnInit() {\n  }\n\n}\n","export class CustomerReview {\n\n  constructor(input?: any){\n    this.id = input && input.id || '';\n    this.range = input && input.range || '';\n    this.submittedOn = input && input.submittedOn || '';\n    this.rating = input && input.rating || '';\n    this.comments = input && input.comments || '';\n  }\n\n  id: string;\n  range: string;\n  submittedOn: number;\n  rating: number;\n  comments: string;\n}\n","import {Component, EventEmitter, Input, OnInit, Output} from '@angular/core';\nimport {FormControl, Validators} from '@angular/forms';\nimport {HttpClient} from '@angular/common/http';\nimport {CustomerReview} from '../customer-review';\nimport {ActivatedRoute, Router} from '@angular/router';\nimport { MatSnackBar } from '@angular/material/snack-bar';\nimport {Provider} from '@brightpath/common';\nimport {ProvidersService} from '@brightpath/scheduling';\n\n@Component({\n  selector: 'provider-rating-widget',\n  templateUrl: './provider-rating-widget.component.html',\n  styleUrls: ['./provider-rating-widget.component.scss']\n})\nexport class ProviderRatingWidgetComponent implements OnInit {\n\n  @Input() provider: Provider;\n  @Input() providerId = '';\n  @Input() customerId = '';\n  rating = 0;\n  ratings = [];\n\n  commentFormControl = new FormControl('', [Validators.required]);\n  loading = false;\n  loadingReviews = false;\n  @Output() saved = new EventEmitter();\n\n\n  constructor(private providerService: ProvidersService,\n              private http: HttpClient,\n              private snackbar: MatSnackBar,\n              private router: Router,\n              private route: ActivatedRoute) {\n  }\n\n  ngOnInit() {\n    this.loadingReviews = true;\n    this.providerService.getProviderById(this.provider.id)\n      .then((response: any) => {\n          console.log(response);\n          this.provider = response;\n        },\n        (error) => {\n          console.log('Error getting provider');\n          console.log(error);\n        }\n      );\n    this.providerService.getRatingsForProvider(this.provider.id)\n      .then((response: any) => {\n        console.log('success', response);\n        this.ratings = response;\n        this.loadingReviews = false;\n      });\n  }\n\n  onRatingChanged(rating) {\n    console.log('Changed: ' + rating);\n    this.rating = rating;\n  }\n\n  submitRating() {\n    const customerReview: CustomerReview = new CustomerReview();\n    customerReview.id = this.provider.id;\n    customerReview.range = this.customerId;\n    customerReview.submittedOn = new Date().getTime();\n    customerReview.rating = this.rating;\n    customerReview.comments = this.commentFormControl.value;\n\n    const reviewUrl = `https://api-dev.brightpathvt.com/customers/reviews`;\n\n    this.loading = true;\n\n    console.log('customerreview', customerReview);\n\n    this.http.post(reviewUrl, customerReview)\n      .subscribe((response) => {\n        this.loading = false;\n        this.snackbar.open('Review Saved', 'OK', {\n          verticalPosition: 'top',\n          duration: 2000\n        });\n\n        // show the success message\n        this.saved.emit(response);\n        // this.router.navigateByUrl('/home');\n      }, (error) => {\n        this.loading = false;\n      }, () => {\n        this.loading = false;\n      });\n  }\n\n}\n","import {Component, Input, OnInit} from '@angular/core';\nimport {HttpClient} from '@angular/common/http';\n\n@Component({\n  selector: 'provider-details',\n  templateUrl: './provider-details.component.html',\n  styleUrls: ['./provider-details.component.scss']\n})\nexport class ProviderDetailsComponent implements OnInit {\n\n  @Input() providerDetails: any;\n  loading = false;\n\n  constructor(private http: HttpClient) { }\n\n  ngOnInit() {\n  }\n\n}\n","import {Component, EventEmitter, Input, OnInit, Output} from '@angular/core';\nimport {UUID} from 'angular2-uuid';\nimport { MatSnackBar } from '@angular/material/snack-bar';\nimport {StreamActivity, StreamClientService} from '@brightpath/activity-stream';\n\n@Component({\n  selector: 'provider-private-message',\n  templateUrl: './provider-private-message.component.html',\n  styleUrls: ['./provider-private-message.component.scss']\n})\nexport class ProviderPrivateMessageComponent implements OnInit {\n\n  @Input() customerId;\n  @Input() providerId;\n  @Output() close = new EventEmitter<boolean>();\n\n  constructor(private streamClientService: StreamClientService, private snackbar: MatSnackBar) {\n  }\n\n  onPrivateMessage(privateMessage: StreamActivity) {\n    privateMessage.actor = 'customers:' + this.customerId;\n    privateMessage.threadId = UUID.UUID();\n    privateMessage.to = [`notification:${this.providerId}`];\n    privateMessage.target = `inbox:${this.providerId}`;\n    this.streamClientService.getToken('inbox', this.providerId).then((response: any) => {\n      const token = response.token;\n      this.streamClientService.addActivity(privateMessage, 'inbox', this.providerId, token).then((privateMessageResponse) => {\n        this.snackbar.open('Sent Private Message', 'OK', {\n          verticalPosition: 'top',\n          duration        : 2000\n        });\n      });\n      this.close.emit(true);\n    });\n  }\n\n  ngOnInit() {\n  }\n\n}\n","import {Component, Input, OnInit} from '@angular/core';\nimport {Router} from '@angular/router';\nimport {StreamActivity, StreamClientService} from '@brightpath/activity-stream';\nimport {CustomerService, ProvidersService} from '@brightpath/scheduling';\nimport {Customer} from '@brightpath/common';\n\n@Component({\n  selector: 'provider-select',\n  templateUrl: './provider-select.component.html',\n  styleUrls: ['./provider-select.component.scss']\n})\nexport class ProviderSelectComponent implements OnInit {\n\n  @Input() customerId;\n  @Input() customer;\n  loading = false;\n  providers = [];\n\n  constructor(\n    private providerService: ProvidersService,\n    private customerService: CustomerService,\n    private streamClient: StreamClientService,\n    private router: Router) { }\n\n  ngOnInit() {\n    if (this.customer === null || this.customer === undefined) {\n      // load the customer\n      this.customerService.loadCustomer(this.customerId).subscribe((customerList: Customer[]) => {\n        if (customerList !== null && customerList.length > 0) {\n          this.customer = customerList[0];\n        }\n      });\n    }\n    this.loadProviders();\n  }\n\n  loadProviders() {\n    this.providerService.getAllProviders().then((providers: any[]) => {\n      console.log(providers);\n      this.providers = providers;\n    });\n\n  }\n\n  onProviderSelected(newProvider) {\n    console.log('the user wants this guy: ', newProvider);\n    if (this.customer.preferredProvider !== null && this.customer.preferredProvider !== undefined) {\n      // this person is switching providers.  Create an activity and CC it to the old provider's notification stream\n      this.streamClient.getToken('timeline', this.customer.id).then((response: any) => {\n        const token = response.token;\n        const activity: StreamActivity = new StreamActivity();\n        activity.verb = 'cancelprovider';\n        activity.actor = `customers:${this.customer.id}`;\n        activity.target = `providers:${this.customer.preferredProvider}`;\n        activity.to = [`notification:${this.customer.preferredProvider}`];\n        activity.object = 'none';\n        console.log('about to create the following', activity);\n        this.streamClient.addActivity(activity, 'timeline', this.customer.id, token);\n      });\n    }\n    this.customer.preferredProvider = newProvider.id;\n    // TODO: Need to signal that the preferred provider has changed\n    // this.auth.saveAuthIdentityToLocalStorage();\n    this.customerService.saveCustomer(this.customer)\n      .subscribe((response) => {\n\n        this.streamClient.getToken('timeline', this.customer.id).then((tokenresponse: any) => {\n          console.log('got the ticket honkey dorey');\n          const token = tokenresponse.token;\n          const activity: StreamActivity = new StreamActivity();\n          activity.verb = 'preferredprovider';\n          activity.actor = `customers:${this.customer.id}`;\n          activity.target = `providers:${this.customer.preferredProvider}`;\n          activity.to = [`notification:${this.customer.preferredProvider}`];\n          activity.object = 'none';\n          console.log('about to create the following', activity);\n          this.streamClient.addActivity(activity, 'timeline', this.customer.id, token);\n\n          // now follow the new provider\n          this.streamClient.follow(this.customer.id, 'timeline', this.customer.preferredProvider, 'providers');\n        });\n\n        // TODO: This shouldn't navigate, but should instead emit an event\n        this.router.navigateByUrl('home');\n      });\n  }\n\n}\n","import { Pipe, PipeTransform } from '@angular/core';\nimport {DomSanitizer} from '@angular/platform-browser';\n\n@Pipe({ name: 'keepHtml', pure: false })\nexport class EscapeHtmlPipe implements PipeTransform {\n  constructor(private sanitizer: DomSanitizer) {\n  }\n\n  transform(content) {\n    return this.sanitizer.bypassSecurityTrustHtml(content);\n  }\n}\n","import {Component, ContentChild, Input, OnInit, TemplateRef} from '@angular/core';\nimport {Provider} from '@brightpath/common';\nimport {ProvidersService} from '@brightpath/scheduling';\n\n@Component({\n  selector: 'provider-provider-summary',\n  templateUrl: './provider-summary.component.html',\n  styleUrls: ['./provider-summary.component.css']\n})\nexport class ProviderSummaryComponent implements OnInit {\n\n  @Input() providerId: string;\n  @Input() provider: Provider;\n  @ContentChild(TemplateRef) tplRef: TemplateRef<any>;\n\n  constructor(private providerService: ProvidersService) { }\n\n  ngOnInit() {\n    // console.log('ngOnInit and tplRef === ' + this.tplRef);\n    if ( this.provider === undefined || this.provider === null) {\n      // we need to have a providerId or there's a problem here\n      if (this.providerId === undefined || this.providerId === null) {\n        this.provider = new Provider({\n          firstName: 'None',\n          lastName: ''\n        });\n      } else {\n        this.providerService.getProviderById(this.providerId).then((result) => {\n          this.provider = new Provider(result);\n        }).catch((error) => {\n          console.log('An error occurred', error);\n        });\n      }\n    }\n  }\n\n}\n","import { NgModule } from '@angular/core';\nimport {ProviderWidgetComponent} from './providers/provider-widget/provider-widget.component';\nimport {ProviderRatingComponent} from './providers/provider-rating/provider-rating.component';\nimport {ProviderRatingItemComponent} from\n    './providers/provider-rating/provider-rating-widget/provider-rating-item/provider-rating-item.component';\nimport {ProviderRatingWidgetComponent} from './providers/provider-rating/provider-rating-widget/provider-rating-widget.component';\nimport {ProviderDetailsComponent} from './providers/provider-details/provider-details.component';\nimport {ProviderPrivateMessageComponent} from './providers/provider-private-message/provider-private-message.component';\nimport {ProviderSelectComponent} from './providers/provider-select/provider-select.component';\nimport {StarRatingComponent} from './providers/star-rating/star-rating.component';\nimport {CommonModule} from '@angular/common';\nimport {ReactiveFormsModule} from '@angular/forms';\nimport {EscapeHtmlPipe} from './providers/escape-html.pipe';\nimport { ProviderSummaryComponent } from './providers/provider-summary/provider-summary.component';\nimport {FlexLayoutModule} from '@angular/flex-layout';\nimport {AuthModule} from \"auth\";\nimport {MaterialModule} from \"common\";\nimport {SchedulingModule} from \"scheduling\";\nimport {ActivityStreamModule} from \"activity-stream\";\n\n\n\n@NgModule({\n  declarations: [\n    ProviderWidgetComponent,\n    ProviderRatingComponent,\n    ProviderRatingItemComponent,\n    ProviderRatingWidgetComponent,\n    ProviderDetailsComponent,\n    ProviderPrivateMessageComponent,\n    ProviderSelectComponent,\n    StarRatingComponent,\n    EscapeHtmlPipe,\n    ProviderSummaryComponent\n  ],\n  imports: [\n    MaterialModule,\n    SchedulingModule,\n    CommonModule,\n    FlexLayoutModule,\n    ReactiveFormsModule,\n    ActivityStreamModule,\n    AuthModule\n  ],\n  exports: [\n    ProviderWidgetComponent,\n    ProviderSummaryComponent\n  ]\n})\nexport class ProvidersModule { }\n"]}